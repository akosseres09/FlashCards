<div class="bg-linear-to-br from-slate-900 via-slate-800 to-slate-900 py-12 px-4 flex-1">
    <div class="max-w-7xl mx-auto">
        <div class="mb-8">
            <h1 class="text-4xl font-bold text-white mb-2">My Projects</h1>
            <p class="text-slate-400 text-lg">Manage and study your flashcard collections</p>
        </div>

        @if (isLoading) {
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            @for (i of [1, 2, 3, 4, 5, 6]; track i) {
            <div class="bg-slate-800 rounded-xl p-6 border border-slate-700 animate-pulse">
                <div class="h-6 bg-slate-700 rounded w-3/4 mb-3"></div>
                <div class="h-4 bg-slate-700 rounded w-full mb-2"></div>
                <div class="h-4 bg-slate-700 rounded w-5/6 mb-4"></div>
                <div class="flex gap-4 mb-4">
                    <div class="h-4 bg-slate-700 rounded w-20"></div>
                    <div class="h-4 bg-slate-700 rounded w-24"></div>
                </div>
                <div class="h-10 bg-slate-700 rounded"></div>
            </div>
            }
        </div>

        } @else if (projects.length === 0) {
        <div class="flex flex-col items-center justify-center py-20">
            <div class="w-24 h-24 bg-slate-800 rounded-2xl flex items-center justify-center mb-6">
                <lucide-icon name="folder-open" class="w-12 h-12 text-slate-600"></lucide-icon>
            </div>
            <h2 class="text-2xl font-bold text-white mb-2">No Projects Yet</h2>
            <p class="text-slate-400 text-center max-w-md mb-8">
                Create your first flashcard project to start learning. Organize your study materials
                into projects for better focus.
            </p>
            <button
                (click)="openModal()"
                class="cursor-pointer flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg transition-all duration-200 transform hover:scale-[1.02] active:scale-[0.98]"
            >
                <lucide-icon name="plus" class="w-5 h-5"></lucide-icon>
                <span>Create Your First Project</span>
            </button>
        </div>
        } @else {
        <div class="mb-6 flex justify-between items-center">
            <p class="text-slate-400">
                {{ projects.length }} {{ projects.length === 1 ? 'project' : 'projects' }}
            </p>
            <button
                (click)="openModal()"
                class="flex cursor-pointer items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg transition-all duration-200 transform hover:scale-[1.02] active:scale-[0.98]"
            >
                <lucide-icon name="plus" class="w-4 h-4"></lucide-icon>
                <span>New Project</span>
            </button>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            @for (project of projects; track project.id) {
            <div
                class="bg-slate-800 rounded-xl p-6 border border-slate-700 hover:border-slate-600 transition-all duration-200 hover:shadow-xl group"
            >
                <div class="flex items-start justify-between mb-4">
                    <div class="flex-1">
                        <h3
                            class="text-xl font-semibold text-white mb-2 group-hover:text-blue-400 transition-colors"
                        >
                            {{ project.name }}
                        </h3>
                        <p class="text-slate-400 text-sm line-clamp-2">
                            {{ project.description }}
                        </p>
                    </div>
                </div>

                <div class="flex gap-4 mb-4 text-sm">
                    <div class="flex items-center gap-1 text-slate-400">
                        <lucide-icon name="file-text" class="w-4 h-4"></lucide-icon>
                        <span>{{ project.cardCount }} cards</span>
                    </div>
                    @if (project.lastStudied) {
                    <div class="flex items-center gap-1 text-slate-400">
                        <lucide-icon name="clock" class="w-4 h-4"></lucide-icon>
                        <span>Recent</span>
                    </div>
                    }
                </div>

                <div class="flex gap-2">
                    <a
                        routerLink="/projects/{{ project.id }}"
                        class="flex-1 cursor-pointer flex items-center justify-center gap-2 py-2 px-4 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-all duration-200"
                    >
                        <lucide-icon name="play" class="w-4 h-4"></lucide-icon>
                        <span>Study</span>
                    </a>
                    <button
                        (click)="
                            openModal('edit', {
                                id: project.id,
                                name: project.name,
                                description: project.description
                            })
                        "
                        class="flex cursor-pointer items-center justify-center p-2 bg-slate-700 hover:bg-slate-600 text-slate-300 rounded-lg transition-all duration-200"
                    >
                        <lucide-icon name="pencil" class="w-4 h-4"></lucide-icon>
                    </button>
                    <button
                        class="flex cursor-pointer items-center justify-center p-2 bg-slate-700 hover:bg-slate-600 text-slate-300 hover:text-red-400 rounded-lg transition-all duration-200"
                        (click)="
                            openModal('delete', {
                                id: project.id,
                                name: project.name,
                                description: project.description
                            })
                        "
                    >
                        <lucide-icon name="trash-2" class="w-4 h-4"></lucide-icon>
                    </button>
                </div>
            </div>
            }
        </div>
        }
    </div>

    @if (isModalOpen && user) {
    <app-projects-modal
        [mode]="modalMode"
        [projectId]="editingProjectId"
        [projectName]="projectName"
        [projectDescription]="projectDescription"
        [userId]="user.uid"
        (modalClosed)="closeModal()"
    ></app-projects-modal>
    }
</div>
